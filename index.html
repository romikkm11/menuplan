<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>–ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –º–µ–Ω—é</title>
    <style>
        :root {
            --sidebar-width: 220px;
            --sidebar-collapsed-width: 80px;
            --content-padding: 20px;
        }

        body { font-family: Arial, sans-serif; margin: 0; background-color: #f4f4f4; display: flex; transition: margin-left 0.3s; }
        .sidebar {
            width: 200px;
            background-color: #333;
            color: white;
            height: 100vh;
            padding: 20px;
            position: fixed;
            transition: width 0.3s;
            z-index: 3000;
        }
        .sidebar.collapsed { width: 60px; }

        .sidebar h2 { margin: 0 0 20px; font-size: 1.2em; display: block; }
        .sidebar.collapsed h2 { display: none; }
        .sidebar a { color: white; text-decoration: none; display: flex; align-items: center; padding: 10px; margin-bottom: 10px; border-radius: 4px; }
        .sidebar a:hover { background-color: #555; }
        .sidebar a span { margin-left: 10px; display: inline; }
        .sidebar.collapsed a span { display: none; }
        .toggle-btn { background: none; border: none; color: white; font-size: 1.2em; cursor: pointer; padding: 10px; width: 100%; text-align: left; }

        /* content uses CSS variable to allow section full-width offsets */
        .content {
            margin-left: var(--sidebar-width);
            padding: var(--content-padding);
            max-width: 2180px;
            flex: 1;
            transition: margin-left 0.3s;
            position: relative;
            z-index: 0;
            overflow: auto;
        }
        .content.collapsed { margin-left: var(--sidebar-collapsed-width); }

        h1, h2 { color: #333; }

        .section {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: relative;
            left: calc(-1 * var(--sidebar-width));
            width: calc(100% + var(--sidebar-width));
            box-sizing: border-box;
            padding-left: calc(var(--content-padding) + var(--sidebar-width));
            padding-right: var(--content-padding);
            min-height: 100vh;
        }

        /* when content has collapsed sidebar state adjust section offset */
        .content.collapsed .section {
            left: calc(-1 * var(--sidebar-collapsed-width));
            width: calc(100% + var(--sidebar-collapsed-width));
            padding-left: calc(var(--content-padding) + var(--sidebar-collapsed-width));
            padding-right: var(--content-padding);
        }

        select, button { padding: 8px; margin: 5px; border: 1px solid #ccc; border-radius: 4px; }
        button { background-color: #28a745; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #218838; }
        .menu, .shopping-list { margin-top: 10px; }
        .menu-table { width: 100%; border-collapse: collapse; }
        .menu-table th, .menu-table td { padding: 8px 5px; text-align: center; vertical-align: middle; }
        .menu-table th { background: #f8f9fa; text-align: center; }
        .menu-table td { border-bottom: 1px solid #eee; }
        .menu-table select { min-width: 120px; max-width: 200px; }
        .error { color: red; display: none; }
        .total-cost { font-weight: bold; padding: 10px; margin-top: 10px; background-color: #f8f9fa; border-radius: 4px; }
        .auth-btn { background-color: #007bff; }
        .auth-btn:hover { background-color: #0056b3; }
        .auth-form input { display: block; width: 90%; margin-bottom: 5px; padding: 6px; }
        #menuTotalDishesPrice { font-weight:bold; margin:10px 0; }

        .dish-search-input-popup{
            width: 95%; padding: 5px; margin-bottom: 5px; border: 1px solid #ccc; border-radius: 4px;
            display: block;
        }
        .dish-select-popup {
            position: absolute;
            z-index: 1000; /* keep popup under sidebar (sidebar z-index is higher) */
            background: #fff;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            padding: 8px;
            min-width: 220px;
            max-width: 350px;
        }
        .dish-select-popup ul { list-style: none; margin: 0; padding: 0; max-height: 200px; overflow-y: auto; }
        .dish-select-popup li { padding: 6px 8px; cursor: pointer; border-radius: 4px; }
        .dish-select-popup li.selected, .dish-select-popup li:hover { background: #e9ecef; }

        /* Layout change: controls go under the dish field */
        .menu-dish-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            justify-content: flex-start;
        }

        .menu-dish {
            width: 200px !important;
            min-width: 200px !important;
            max-width: 200px !important;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: inline-block;
            vertical-align: middle;
            text-align: left;
            background: #fff;
            color: #333;
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 8px;
            cursor: pointer;
        }

        .weight-controls {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 4px;
        }

        .weight-btn {
            background: #f0f0f0;
            color: #333;
            border: 1px solid #ccc;
            width: 30px;
            height: 30px;
            line-height: 28px;
            padding: 0;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            margin: 0;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .weight-display { min-width: 56px; text-align: center; font-size: 0.95em; color: #333; }

        .copy-btn-wrapper { position: absolute; top: 16px; right: 24px; z-index: 2; }
        .copy-icon-btn { background: none; border: none; cursor: pointer; font-size: 1.5em; color: #28a745; padding: 4px 8px; border-radius: 50%; transition: background 0.2s; }
        .copy-icon-btn:hover { background: #e9ecef; }
        #dailyCalories { margin-top: 8px; font-weight: 600; }
        #dailyCalories .day-cal { margin: 2px 0; font-weight: 400; }
    </style>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-firestore.js";
        import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCq8HRJchKgy7w97JzKPWar37YbiDMt94o",
            authDomain: "menu-data-4bb71.firebaseapp.com",
            projectId: "menu-data-4bb71",
            storageBucket: "menu-data-4bb71.firebasestorage.app",
            messagingSenderId: "1055556497638",
            appId: "1:1055556497638:web:fde8fc971af723b755cb27"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // --- –ê–í–¢–ï–ù–¢–ò–§–Ü–ö–ê–¶–Ü–Ø ---
        onAuthStateChanged(auth, user => {
            if (user) {
                const b = document.getElementById('authBlock'); if (b) b.style.display = 'none';
                const l = document.getElementById('logoutBtn'); if (l) l.style.display = 'inline';
            } else {
                const b = document.getElementById('authBlock'); if (b) b.style.display = 'block';
                const l = document.getElementById('logoutBtn'); if (l) l.style.display = 'none';
            }
        });

        window.login = async function() {
            const email = document.getElementById('email')?.value || '';
            const password = document.getElementById('password')?.value || '';
            try { await signInWithEmailAndPassword(auth, email, password); }
            catch (e) { alert('–ù–µ–≤—ñ—Ä–Ω–∏–π email –∞–±–æ –ø–∞—Ä–æ–ª—å'); }
        };

        window.logout = async function() { await signOut(auth); };

        // --- –û–°–ù–û–í–ù–ò–ô –ö–û–î ---
        let dishes = [];
        let ingredients = [];
        const mealTypes = ['–°–Ω—ñ–¥–∞–Ω–æ–∫', '–û–±—ñ–¥', '–í–µ—á–µ—Ä—è'];
        const days = ['–ü–æ–Ω–µ–¥—ñ–ª–æ–∫', '–í—ñ–≤—Ç–æ—Ä–æ–∫', '–°–µ—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä', '–ü‚Äô—è—Ç–Ω–∏—Ü—è', '–°—É–±–æ—Ç–∞', '–ù–µ–¥—ñ–ª—è'];
        let menu = Array(7).fill().map(() => ({ –°–Ω—ñ–¥–∞–Ω–æ–∫: '', –û–±—ñ–¥: '', –í–µ—á–µ—Ä—è: '' }));
        let menuWeights = Array(7).fill().map(() => ({ –°–Ω—ñ–¥–∞–Ω–æ–∫: null, –û–±—ñ–¥: null, –í–µ—á–µ—Ä—è: null }));

        function getSortedDishes() { return [...dishes].sort((a,b) => a.name.localeCompare(b.name, 'uk')); }

        async function loadData() {
            const dishesSnap = await getDocs(collection(db, "dishes"));
            dishes = dishesSnap.docs.map(doc => doc.data());
            const ingredientsSnap = await getDocs(collection(db, "ingredients"));
            ingredients = ingredientsSnap.docs.map(doc => doc.data());
            renderMenu();
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const content = document.getElementById('content');
            sidebar.classList.toggle('collapsed');
            content.classList.toggle('collapsed');
        }

        function getDishBaseQty(dish) {
            if (!dish || !Array.isArray(dish.ingredients)) return 0;
            return dish.ingredients.reduce((s, ing) => s + (Number(ing.quantity) || 0), 0);
        }

        function createDishSelect(dayIdx, meal, selectedValue) {
            const container = document.createElement('div');
            container.className = 'menu-dish-wrapper';

            // –û—Å–Ω–æ–≤–Ω–∏–π input (–≤–∏–≥–ª—è–¥–∞—î —è–∫ select)
            const selectBtn = document.createElement('button');
            selectBtn.type = 'button';
            selectBtn.className = 'menu-dish';
            selectBtn.dataset.day = dayIdx;
            selectBtn.dataset.meal = meal;
            selectBtn.textContent = selectedValue || '–í–∏–±–µ—Ä—ñ—Ç—å —Å—Ç—Ä–∞–≤—É';
            selectBtn.setAttribute('aria-label', `${meal} –¥–µ–Ω—å ${days[dayIdx]}`);

            // –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏–π —Ä—è–¥–æ–∫ –ø—ñ–¥ —Å–µ–ª–µ–∫—Ç–æ–º
            const controls = document.createElement('div');
            controls.className = 'weight-controls';

            // –ú—ñ–Ω—É—Å –∫–Ω–æ–ø–∫–∞
            const minusBtn = document.createElement('button');
            minusBtn.type = 'button';
            minusBtn.className = 'weight-btn';
            minusBtn.textContent = '‚àí';
            minusBtn.title = '–ó–º–µ–Ω—à–∏—Ç–∏ –≤–∞–≥—É –Ω–∞ 100 –≥';
            minusBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                const cur = menuWeights[dayIdx][meal] ?? 0.1;
                const nw = Math.max(0.1, +(cur - 0.1).toFixed(3));
                menuWeights[dayIdx][meal] = nw;
                updateWeightDisplay();
                updateMenuTotalDishesPrice();
                updateDailyCalories();
            });

            // –ü–æ–∫–∞–∑–Ω–∏–∫ –≤–∞–≥–∏ (–≥)
            const weightSpan = document.createElement('span');
            weightSpan.className = 'weight-display';

            // –ü–ª—é—Å –∫–Ω–æ–ø–∫–∞
            const plusBtn = document.createElement('button');
            plusBtn.type = 'button';
            plusBtn.className = 'weight-btn';
            plusBtn.textContent = '+';
            plusBtn.title = '–ó–±—ñ–ª—å—à–∏—Ç–∏ –≤–∞–≥—É –Ω–∞ 100 –≥';
            plusBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                const cur = menuWeights[dayIdx][meal] ?? 0.1;
                const nw = +(cur + 0.1).toFixed(3);
                menuWeights[dayIdx][meal] = nw;
                updateWeightDisplay();
                updateMenuTotalDishesPrice();
                updateDailyCalories();
            });

            function updateWeightDisplay() {
                const w = menuWeights[dayIdx][meal] ?? 0.1;
                weightSpan.textContent = `${Math.round(w * 1000)} –≥`;
            }

            // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤–∞–≥–∏ –ø—Ä–∏ –Ω–∞—è–≤–Ω—ñ–π –≤–∏–±—Ä–∞–Ω—ñ–π —Å—Ç—Ä–∞–≤—ñ
            if (menu[dayIdx][meal]) {
                const dishObj = dishes.find(d => d.name === menu[dayIdx][meal]);
                if (dishObj) {
                    const base = getDishBaseQty(dishObj);
                    if (menuWeights[dayIdx][meal] == null) menuWeights[dayIdx][meal] = base > 0 ? base : 0.1;
                }
            }
            updateWeightDisplay();

            // –ó–±–∏—Ä–∞—î–º–æ –∫–æ–Ω—Ç—Ä–æ–ª—Å–∏ –ø—ñ–¥ —Å–µ–ª–µ–∫—Ç–æ–º: –º—ñ–Ω—É—Å | –≤–∞–≥–∞ | –ø–ª—é—Å
            controls.appendChild(minusBtn);
            controls.appendChild(weightSpan);
            controls.appendChild(plusBtn);

            // –î–æ–¥–∞—î–º–æ —Å–µ–ª–µ–∫—Ç —ñ –∫–æ–Ω—Ç—Ä–æ–ª—Å —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ)
            container.appendChild(selectBtn);
            container.appendChild(controls);

            let popup = null;

            selectBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                if (popup) { popup.remove(); popup = null; return; }
                popup = document.createElement('div'); popup.className = 'dish-select-popup';

                const input = document.createElement('input');
                input.type = 'text'; input.className = 'dish-search-input-popup';
                input.placeholder = '–ü–æ—à—É–∫ —Å—Ç—Ä–∞–≤–∏...'; input.autocomplete = 'off';
                popup.appendChild(input);

                const ul = document.createElement('ul'); popup.appendChild(ul);

                function fillList(filter = '') {
                    ul.innerHTML = '';
                    getSortedDishes()
                        .filter(d => d.name.toLowerCase().includes(filter.toLowerCase()))
                        .forEach(d => {
                            const li = document.createElement('li');
                            li.textContent = d.name;
                            if (d.name === menu[dayIdx][meal]) li.classList.add('selected');
                            li.style.whiteSpace = 'nowrap'; li.style.overflow = 'hidden'; li.style.textOverflow = 'ellipsis';
                            li.addEventListener('mousedown', function(ev) {
                                ev.preventDefault();
                                selectBtn.textContent = d.name;
                                menu[+dayIdx][meal] = d.name;
                                const base = getDishBaseQty(d);
                                menuWeights[dayIdx][meal] = base > 0 ? base : 0.1;
                                updateWeightDisplay();
                                updateMenuTotalDishesPrice();
                                updateDailyCalories();
                                popup.remove(); popup = null;
                            });
                            ul.appendChild(li);
                        });
                }
                fillList('');
                input.addEventListener('input', function() { fillList(this.value); });

                popup.style.position = 'absolute';
                const btnRect = selectBtn.getBoundingClientRect();
                popup.style.top = (btnRect.bottom + window.scrollY + 2) + 'px';
                popup.style.left = (btnRect.left + window.scrollX) + 'px';
                popup.style.width = selectBtn.offsetWidth + 'px';
                document.body.appendChild(popup);

                setTimeout(() => input.focus(), 0);

                function closePopup(e) {
                    if (!popup) return;
                    if (!popup.contains(e.target) && e.target !== selectBtn) {
                        popup.remove(); popup = null; document.removeEventListener('mousedown', closePopup);
                    }
                }
                document.addEventListener('mousedown', closePopup);
            });

            return container;
        }

        function renderMenu() {
            const menuDiv = document.getElementById('menu'); menuDiv.innerHTML = '';
            const table = document.createElement('table'); table.className = 'menu-table';
            const thead = document.createElement('thead');
            const headRow = document.createElement('tr');
            headRow.innerHTML = `<th>–î–µ–Ω—å</th>` + mealTypes.map(meal => `<th>${meal}</th>`).join('') + `<th>–ö–∞–ª–æ—Ä—ñ–π–Ω—ñ—Å—Ç—å (–∫–ö–∞–ª)</th>`;
            thead.appendChild(headRow); table.appendChild(thead);

            const tbody = document.createElement('tbody');
            days.forEach((day, dayIdx) => {
                const row = document.createElement('tr');
                const tdDay = document.createElement('td'); tdDay.innerHTML = `<strong>${day}</strong>`; row.appendChild(tdDay);
                mealTypes.forEach(meal => {
                    const td = document.createElement('td');
                    td.appendChild(createDishSelect(dayIdx, meal, menu[dayIdx][meal]));
                    row.appendChild(td);
                });
                const caloriesTd = document.createElement('td');
                caloriesTd.id = `cal-${dayIdx}`; caloriesTd.textContent = '0.0';
                row.appendChild(caloriesTd);
                tbody.appendChild(row);
            });
            table.appendChild(tbody);
            menuDiv.appendChild(table);

            if (!document.getElementById('menuTotalDishesPrice')) {
                const priceDiv = document.createElement('div');
                priceDiv.id = 'menuTotalDishesPrice'; priceDiv.style = 'font-weight:bold; margin:10px 0;';
                menuDiv.parentNode.insertBefore(priceDiv, menuDiv.nextSibling);
            }

            updateMenuTotalDishesPrice();
            updateDailyCalories();
        }

        function calculateDishCalories(dish, desiredWeightKg = null) {
            if (!dish || !dish.ingredients || !Array.isArray(dish.ingredients)) return 0;
            const baseQty = getDishBaseQty(dish);
            const weight = (desiredWeightKg != null) ? desiredWeightKg : (baseQty > 0 ? baseQty : 0);
            const factor = (baseQty > 0) ? (weight / baseQty) : 1;
            let total = 0;
            dish.ingredients.forEach(ing => {
                const qty = Number(ing.quantity) || 0;
                const scaledQty = qty * factor;
                const baseIng = ingredients.find(i => i.name === ing.name);
                const kcalPer100g = (ing.kcal !== undefined ? Number(ing.kcal) : (baseIng ? Number(baseIng.kcal) : 0)) || 0;
                const kcalPerKgConverted = kcalPer100g * 10;
                total += scaledQty * kcalPerKgConverted;
            });
            return total;
        }

        function updateDailyCalories() {
            days.forEach((day, idx) => {
                let dayTotal = 0;
                mealTypes.forEach(meal => {
                    const dishName = menu[idx][meal]; if (!dishName) return;
                    const dish = dishes.find(d => d.name === dishName);
                    if (dish) {
                        const w = menuWeights[idx][meal] ?? getDishBaseQty(dish) ?? 0.1;
                        dayTotal += calculateDishCalories(dish, w);
                    }
                });
                const el = document.getElementById(`cal-${idx}`); if (el) el.textContent = dayTotal.toFixed(1);
            });
        }

        function updateMenuTotalDishesPrice() {
            let total = 0; const selected = [];
            menu.forEach((dayObj, dayIdx) => mealTypes.forEach(meal => { if (dayObj[meal]) selected.push({ name: dayObj[meal], dayIdx, meal }); }));
            selected.forEach(item => {
                const dish = dishes.find(d => d.name === item.name);
                if (dish && dish.totalPrice) {
                    const baseQty = getDishBaseQty(dish);
                    const w = menuWeights[item.dayIdx][item.meal] ?? (baseQty > 0 ? baseQty : 1);
                    const factor = baseQty > 0 ? (w / baseQty) : 1;
                    total += Number(dish.totalPrice) * factor;
                }
            });
            const el = document.getElementById('menuTotalDishesPrice'); if (el) el.textContent = `–û—Ä—ñ—î–Ω—Ç–æ–≤–Ω–∞ –∑–∞–≥–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å –≤–∏–±—Ä–∞–Ω–∏—Ö —Å—Ç—Ä–∞–≤: ${total.toFixed(2)} –≥—Ä–Ω`;
        }

        function showCopyButton(show) { const btn = document.getElementById('copyShoppingListBtn'); if (btn) btn.style.display = show ? 'inline-block' : 'none'; }

        function copyShoppingList() {
            const icon = document.getElementById('copyIcon');
            const shoppingListDiv = document.getElementById('shoppingList');
            let text = '';
            shoppingListDiv.querySelectorAll('.shopping-item').forEach(item => text += item.textContent + '\n');
            const total = document.getElementById('totalCost')?.textContent; if (total) text += total;
            navigator.clipboard.writeText(text);
            if (icon) { icon.innerHTML = '‚úîÔ∏è'; const btn = document.getElementById('copyShoppingListBtn'); if (btn) btn.disabled = true;
                setTimeout(() => { if (icon) icon.innerHTML = 'üìã'; if (btn) btn.disabled = false; }, 3000); }
        }

        window.generateShoppingList = function() {
            const menuDishes = [];
            menu.forEach((dayObj, dayIdx) => mealTypes.forEach(meal => { if (dayObj[meal]) menuDishes.push({ name: dayObj[meal], dayIdx, meal }); }));
            if (menuDishes.length !== 7 * 3 || menuDishes.some(item => !dishes.find(d => d.name === item.name))) {
                const err = document.getElementById('menuError'); if (err) err.style.display = 'block';
                const sl = document.getElementById('shoppingList'); if (sl) sl.innerHTML = '';
                const tc = document.getElementById('totalCost'); if (tc) tc.innerHTML = '';
                showCopyButton(false); return;
            }
            const err = document.getElementById('menuError'); if (err) err.style.display = 'none';

            const shopping = {}; let totalCost = 0;
            menuDishes.forEach(item => {
                const dish = dishes.find(d => d.name === item.name);
                const baseQty = getDishBaseQty(dish);
                const w = menuWeights[item.dayIdx][item.meal] ?? (baseQty > 0 ? baseQty : 0.1);
                const factor = baseQty > 0 ? (w / baseQty) : 1;
                dish.ingredients.forEach(ing => {
                    if (!shopping[ing.name]) shopping[ing.name] = { quantity: 0, price: 0 };
                    shopping[ing.name].quantity += (ing.quantity || 0) * factor;
                    shopping[ing.name].price = ing.price || ingredients.find(i => i.name === ing.name)?.price || 0;
                });
            });

            const shoppingListDiv = document.getElementById('shoppingList'); shoppingListDiv.innerHTML = '';
            Object.entries(shopping).forEach(([name, data]) => {
                let line = `${name}: ${Number(data.quantity.toFixed(3))} –∫–≥`;
                if (data.price && data.price > 0) { const cost = data.quantity * data.price; totalCost += cost; line += ` ‚Äî ${cost.toFixed(2)} –≥—Ä–Ω`; }
                shoppingListDiv.innerHTML += `<div class="shopping-item">${line}</div>`;
            });
            const totalEl = document.getElementById('totalCost'); if (totalEl) totalEl.innerHTML = `–ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å: ${totalCost.toFixed(2)} –≥—Ä–Ω`;
            showCopyButton(true);
        };

        window.onload = function() {
            loadData();
            const copyBtn = document.getElementById('copyShoppingListBtn'); if (copyBtn) copyBtn.addEventListener('click', copyShoppingList);
        };
    </script>
</head>
<body>
    <div class="sidebar" id="sidebar">
        <button class="toggle-btn" onclick="toggleSidebar()">‚ò∞</button>
        <h2>–ú–µ–Ω—é</h2>
        <a href="index.html"><span role="img" aria-label="–ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫">üìÖ</span><span>–ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫</span></a>
        <a href="dishes.html"><span role="img" aria-label="–°—Ç—Ä–∞–≤–∏">üçΩÔ∏è</span><span>–°—Ç—Ä–∞–≤–∏</span></a>
        <a href="ingredients.html"><span role="img" aria-label="–Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏">ü•ï</span><span>–Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏</span></a>
        <div style="margin-top:20px;">
            <div id="authBlock" class="auth-form">
                <input id="email" type="email" placeholder="Email">
                <input id="password" type="password" placeholder="–ü–∞—Ä–æ–ª—å">
                <button id="loginBtn" class="auth-btn" onclick="login()">–£–≤—ñ–π—Ç–∏</button>
            </div>
            <button id="logoutBtn" class="auth-btn" onclick="logout()" style="display:none;">–í–∏–π—Ç–∏</button>
        </div>
    </div>

    <div class="content" id="content">
        <h1>–ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –º–µ–Ω—é –Ω–∞ —Ç–∏–∂–¥–µ–Ω—å</h1>
        <div class="section">
            <h2>–°—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ –º–µ–Ω—é</h2>
            <div id="menu"></div>
            <button onclick="generateShoppingList()">–°—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</button>
            <p id="menuError" class="error">–í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—ñ –Ω–∞–∑–≤–∏ —Å—Ç—Ä–∞–≤!</p>
        </div>

        <div class="section" style="position:relative;">
            <h2>–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</h2>
            <div class="copy-btn-wrapper">
                <button id="copyShoppingListBtn" class="copy-icon-btn" style="display:none;" title="–ö–æ–ø—ñ—é–≤–∞—Ç–∏ —Å–ø–∏—Å–æ–∫">
                    <span id="copyIcon">üìã</span>
                </button>
            </div>
            <div id="shoppingList" class="shopping-list"></div>
            <div id="totalCost" class="total-cost"></div>
        </div>
    </div>
</body>
</html>